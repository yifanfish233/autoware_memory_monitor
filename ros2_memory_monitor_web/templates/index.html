<!DOCTYPE html>
<html>

<head>
    <title>ROS2 Node Memory Monitor</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- jQuery and Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="container mt-5">
        <h1 class="text-center mb-4">ROS2 Node Memory Monitor</h1>

        <div class="row">
            <div class="col-md-8">
                <div class="card mb-4">
                    <div class="card-body">
                        <p id="status" class="lead"></p>
                        <canvas id="memory-history-chart" class="mb-4"></canvas>
                        <p id="memory-usage-stats"></p>
                        <canvas id="top10-chart"></canvas>
                    </div>
                </div>

                <!-- Jitter Live Graph Card -->
                <div class="card mb-4">
                    <div class="card-body">
                        <h5 class="card-title">Live Jitter Monitor</h5>
                        <canvas id="jitter-live-chart"></canvas>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card">
                    <div class="card-body">
                        <button id="refresh-button" class="btn btn-info mb-3" style="display: none;">Refresh</button>

                        <div class="mb-3">
                            <label for="node-selector">Select Node:</label>
                            <select id="node-selector" class="form-control"></select>
                        </div>

                        <table id="memory-usage-table" class="table table-bordered mb-4">
                            <thead>
                                <tr>
                                    <th>Node</th>
                                    <th>Memory (MB)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Content will be populated by JavaScript -->
                            </tbody>
                        </table>

                        <h5>Jitter Monitor</h5>
                        <p>Select a topic to monitor for jitter:</p>
                        <select id="topicSelector" class="form-control mb-3"></select>
                        <button id="startJitterMonitorBtn" class="btn btn-primary">Start Monitoring</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Include your JavaScript files -->
    <script src="javascripts/memoryMonitor.js"></script>
    <script src="javascripts/jitterMonitor.js"></script>
</body>

</html>
